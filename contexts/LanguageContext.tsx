'use client'

import React, { createContext, useContext, useState, useEffect } from 'react'
import { useAuth } from '@/contexts/AuthContext'

type Language = 'en' | 'es' | 'fr'

interface LanguageContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined)

// Simple translations object
const translations = {
  en: {
    'app.title': 'Hand - Would a modeling agency hire your hands?',
    'app.description': 'Upload your photos. Get brutally honest AI ratings, expert critiques, and a score out of 100.',
    'home.hero.title': 'Would a modeling agency hire your hands?',
    'home.hero.subtitle': 'Upload your photos. Get brutally honest AI ratings, expert critiques, and a score out of 100.',
    'home.cta.getStarted': 'Get Started â†’',
    'home.features.title': 'Ready to Face the Truth?',
    'home.features.subtitle': 'Join thousands of people discovering their hand modeling potential',
    'features.title': 'What You Get',
    'features.subtitle': 'Everything you need to know about your hand modeling potential',
    'features.noSugarcoating.title': 'No sugarcoating',
    'features.noSugarcoating.description': 'Only brutal truth.',
    'features.expertFeedback.title': 'Expert feedback',
    'features.expertFeedback.description': 'You\'ll want to share.',
    'features.score.title': 'Score out of 100',
    'features.score.description': 'Compete with yourself.',
    'features.verdict.title': 'Hand-model verdict',
    'features.verdict.description': 'Yes, maybe, or keep your day job.',
    'examples.title': 'See What You\'re Getting Into ðŸ‘€',
    'examples.subtitle': 'Real examples of our brutally honest feedback',
    'nav.signin': 'Sign In',
    'nav.signup': 'Sign Up',
    'nav.backToHome': 'Back to Home',
    'auth.signin.title': 'Sign in and face the truth about your hands.',
    'auth.signup.title': 'Get your honest hand rating.',
    'auth.email': 'Email',
    'auth.password': 'Password',
    'auth.confirmPassword': 'Confirm Password',
    'auth.emailPlaceholder': 'your@email.com',
    'auth.passwordPlaceholder': 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢',
    'auth.signinButton': 'Sign In',
    'auth.signingIn': 'Signing In...',
    'auth.signupButton': 'Create Account',
    'auth.signingUp': 'Signing Up...',
    'auth.orContinueWith': 'Or continue with',
    'auth.signinWithGoogle': 'Sign in with Google',
    'auth.signupWithGoogle': 'Sign up with Google',
    'auth.noAccount': 'Don\'t have an account?',
    'auth.hasAccount': 'Already have an account?',
    'auth.learnTruth': 'Learn the truth',
    'auth.signinLink': 'Sign in',
    'auth.getRating': 'Get your honest hand rating and discover what your hands really say about you.',
    'settings.title': 'Settings',
    'settings.language': 'Language',
    'settings.languageDescription': 'Choose your preferred language',
    'settings.accountSettings': 'Account Settings',
    'settings.notifications': 'Notifications',
    'settings.emailUpdates': 'Email Updates',
    'settings.done': 'Done',
    'dashboard.title': 'Hand Rating ðŸ‘€',
    'dashboard.subtitle': 'Do you have what it takes to be a hand model? Let\'s find out.',
    'dashboard.uploadDescription': 'Upload a photo and get an honest rating. No sugarcoating.',
    'dashboard.mobileTips': 'ðŸ“± Mobile Tips:',
    'dashboard.mobileTipsDescription': 'Click "Upload Photo" to choose from your gallery or take a new photo with your camera. Make sure your hands are well-lit and clearly visible!',
    'dashboard.dropPhoto': 'Drop your photo here',
    'dashboard.clickToUpload': 'Click to upload your hand photo',
    'dashboard.dragDropOption': 'or drag & drop, or use the button below',
    'dashboard.uploadPhoto': 'Upload Photo',
    'dashboard.chooseFromGallery': 'Choose from Gallery',
    'dashboard.takePhoto': 'Take Photo',
    'dashboard.readyForRating': 'Ready to get your brutally honest rating?',
    'dashboard.analyzing': 'Analyzing...',
    'dashboard.generateResults': 'Generate Results',
    'dashboard.outOf': 'out of 100',
    'dashboard.analysis': 'ðŸ“ Analysis',
    'dashboard.strengths': 'âœ¨ Strengths',
    'dashboard.weaknesses': 'âš ï¸ Weaknesses',
    'dashboard.noStrengths': 'No strengths identified',
    'dashboard.noWeaknesses': 'No weaknesses identified',
    'dashboard.tryAnotherPhoto': 'ðŸ“¸ Try Another Photo',
    'dashboard.pleaseSelectFile': 'Please select a file first',
    'dashboard.fileSizeError': 'File size must be less than 10MB',
    'dashboard.invalidFileError': 'Please select an image file',
    'dashboard.signinRequired': 'Please sign in to generate critiques.',
    'dashboard.generationFailed': 'Failed to generate results. Please try again.',
    'profile.dashboard': 'ðŸ  Dashboard',
    'profile.gallery': 'ðŸ–¼ï¸ Gallery',
    'profile.profile': 'ðŸ‘¤ Profile',
    'profile.settings': 'âš™ï¸ Settings',
    'profile.logout': 'ðŸšª Logout',
    'gallery.title': 'Your Gallery',
    'gallery.subtitle': 'View and manage your hand modeling portfolio',
    'gallery.loading': 'Loading Your Gallery...',
    'gallery.loadingDescription': 'Fetching your hand critiques',
    'gallery.error': 'Error Loading Gallery',
    'gallery.tryAgain': 'ðŸ”„ Try Again',
    'gallery.noPhotos': 'No Photos Yet',
    'gallery.noPhotosDescription': 'Start building your hand modeling portfolio',
    'gallery.uploadFirst': 'ðŸš€ Upload First Photo',
    'profile.title': 'Profile Settings',
    'profile.subtitle': 'Manage your account and preferences',
    'profile.backToDashboard': 'Back to Dashboard',
    'profile.viewGallery': 'ðŸ–¼ï¸ View Gallery',
    'profile.accountInfo': 'Account Information',
    'profile.editProfile': 'âœï¸ Edit Profile',
    'profile.displayName': 'Display Name',
    'profile.displayNamePlaceholder': 'Enter your display name',
    'profile.email': 'Email',
    'profile.emailPlaceholder': 'Enter your email',
    'profile.accountType': 'Account Type',
    'profile.googleAccount': 'Google Account',
    'profile.emailPassword': 'Email & Password',
    'profile.notSet': 'Not set',
    'profile.saving': 'Saving...',
    'profile.saveChanges': 'ðŸ’¾ Save Changes',
    'profile.cancel': 'âŒ Cancel',
    'profile.uploadCredits': 'ðŸ“¤ Upload Credits',
    'profile.uploadsRemaining': 'Uploads Remaining',
    'profile.uploadsRemainingDesc': 'Uploads you can use anytime',
    'profile.totalUploads': 'Total Uploads Used',
    'profile.totalUploadsDesc': 'All-time upload count',
    'profile.dangerZone': 'âš ï¸ Danger Zone',
    'profile.deleteAccount': 'Delete Account',
    'profile.deleteAccountDesc': 'Permanently remove your account and data',
    'profile.delete': 'ðŸ—‘ï¸ Delete',
    'profile.signOut': 'Sign Out',
    'profile.signOutDesc': 'Sign out from all devices',
    'profile.signOutButton': 'ðŸšª Sign Out',
    'offer.title': 'Get Your Hand Rating',
    'offer.subtitle': 'Professional hand modeling assessment',
    'offer.price': 'for 25 pictures',
    'offer.perPicture': 'That\'s only $0.60 per picture!',
    'offer.whatYouGet': 'What You Get:',
    'offer.scoreOutOf': 'Score out of 100 for each picture',
    'offer.expertFeedback': 'Expert feedback and analysis',
    'offer.improvementTips': 'Improvement tips and suggestions',
    'offer.verdict': 'Hand model potential verdict',
    'offer.unlimitedTime': 'Unlimited time to use credits',
    'offer.processing': 'Processing...',
    'offer.buyFor': 'Buy for $',
    'offer.back': 'Back',
    'offer.warningTitle': 'âš ï¸',
    'offer.warningMessage': 'You have 0 uploads remaining. Purchase more credits to continue.',
    'navbar.dashboard': 'Dashboard',
    'navbar.getCredits': 'Get Credits',
    'navbar.signIn': 'Sign In',
    'navbar.signUp': 'Sign Up',
  },
  es: {
    'app.title': 'Hand - Â¿Te contratarÃ­a una agencia de modelos para tus manos?',
    'app.description': 'Sube fotos de tus manos. ObtÃ©n calificaciones brutalmente honestas de IA, crÃ­ticas expertas y una puntuaciÃ³n de 100.',
    'home.hero.title': 'Â¿Te contratarÃ­a una agencia de modelos para tus manos?',
    'home.hero.subtitle': 'Sube fotos de tus manos. ObtÃ©n calificaciones brutalmente honestas de IA, crÃ­ticas expertas y una puntuaciÃ³n de 100.',
    'home.cta.getStarted': 'Comenzar â†’',
    'home.features.title': 'Â¿Listo para Enfrentar la Verdad?',
    'home.features.subtitle': 'Ãšnete a miles de personas descubriendo su potencial de modelado de manos',
    'features.title': 'Lo Que Obtienes',
    'features.subtitle': 'Todo lo que necesitas saber sobre tu potencial de modelado de manos',
    'features.noSugarcoating.title': 'Sin endulzar',
    'features.noSugarcoating.description': 'Solo la verdad brutal.',
    'features.expertFeedback.title': 'Comentarios expertos',
    'features.expertFeedback.description': 'QuerrÃ¡s compartirlos.',
    'features.score.title': 'PuntuaciÃ³n de 100',
    'features.score.description': 'Compite contigo mismo.',
    'features.verdict.title': 'Veredicto de modelo de manos',
    'features.verdict.description': 'SÃ­, tal vez, o mantÃ©n tu trabajo diario.',
    'examples.title': 'Mira En Lo Que Te EstÃ¡s Metiendo ðŸ‘€',
    'examples.subtitle': 'Ejemplos reales de nuestros comentarios brutalmente honestos',
    'nav.signin': 'Iniciar SesiÃ³n',
    'nav.signup': 'Registrarse',
    'nav.backToHome': 'Volver al Inicio',
    'auth.signin.title': 'Inicia sesiÃ³n y enfrenta la verdad sobre tus manos.',
    'auth.signup.title': 'ObtÃ©n tu calificaciÃ³n honesta de manos.',
    'auth.email': 'Correo ElectrÃ³nico',
    'auth.password': 'ContraseÃ±a',
    'auth.confirmPassword': 'Confirmar ContraseÃ±a',
    'auth.emailPlaceholder': 'tu@email.com',
    'auth.passwordPlaceholder': 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢',
    'auth.signinButton': 'Iniciar SesiÃ³n',
    'auth.signingIn': 'Iniciando SesiÃ³n...',
    'auth.signupButton': 'Crear Cuenta',
    'auth.signingUp': 'RegistrÃ¡ndose...',
    'auth.orContinueWith': 'O continÃºa con',
    'auth.signinWithGoogle': 'Iniciar sesiÃ³n con Google',
    'auth.signupWithGoogle': 'Registrarse con Google',
    'auth.noAccount': 'Â¿No tienes una cuenta?',
    'auth.hasAccount': 'Â¿Ya tienes una cuenta?',
    'auth.learnTruth': 'Aprende la verdad',
    'auth.signinLink': 'Iniciar sesiÃ³n',
    'auth.getRating': 'ObtÃ©n tu calificaciÃ³n honesta de manos y descubre lo que tus manos realmente dicen sobre ti.',
    'settings.title': 'ConfiguraciÃ³n',
    'settings.language': 'Idioma',
    'settings.languageDescription': 'Elige tu idioma preferido',
    'settings.accountSettings': 'ConfiguraciÃ³n de Cuenta',
    'settings.notifications': 'Notificaciones',
    'settings.emailUpdates': 'Actualizaciones por Correo',
    'settings.done': 'Listo',
    'dashboard.title': 'CalificaciÃ³n de Manos ðŸ‘€',
    'dashboard.subtitle': 'Â¿Tienes lo que se necesita para ser modelo de manos? DescubrÃ¡moslo.',
    'dashboard.uploadDescription': 'Sube una foto y obtÃ©n una calificaciÃ³n honesta. Sin endulzar.',
    'dashboard.mobileTips': 'ðŸ“± Consejos MÃ³viles:',
    'dashboard.mobileTipsDescription': 'Haz clic en "Subir Foto" para elegir de tu galerÃ­a o tomar una nueva foto con tu cÃ¡mara. Â¡AsegÃºrate de que tus manos estÃ©n bien iluminadas y claramente visibles!',
    'dashboard.dropPhoto': 'Suelta tu foto aquÃ­',
    'dashboard.clickToUpload': 'Haz clic para subir tu foto de manos',
    'dashboard.dragDropOption': 'o arrastra y suelta, o usa el botÃ³n de abajo',
    'dashboard.uploadPhoto': 'Subir Foto',
    'dashboard.chooseFromGallery': 'Elegir de GalerÃ­a',
    'dashboard.takePhoto': 'Tomar Foto',
    'dashboard.readyForRating': 'Â¿Listo para obtener tu calificaciÃ³n brutalmente honesta?',
    'dashboard.analyzing': 'Analizando...',
    'dashboard.generateResults': 'Generar Resultados',
    'dashboard.outOf': 'de 100',
    'dashboard.analysis': 'ðŸ“ AnÃ¡lisis',
    'dashboard.strengths': 'âœ¨ Fortalezas',
    'dashboard.weaknesses': 'âš ï¸ Debilidades',
    'dashboard.noStrengths': 'No se identificaron fortalezas',
    'dashboard.noWeaknesses': 'No se identificaron debilidades',
    'dashboard.tryAnotherPhoto': 'ðŸ“¸ Probar Otra Foto',
    'dashboard.pleaseSelectFile': 'Por favor selecciona un archivo primero',
    'dashboard.fileSizeError': 'El tamaÃ±o del archivo debe ser menor a 10MB',
    'dashboard.invalidFileError': 'Por favor selecciona un archivo de imagen',
    'dashboard.signinRequired': 'Por favor inicia sesiÃ³n para generar crÃ­ticas.',
    'dashboard.generationFailed': 'Error al generar resultados. Por favor intenta de nuevo.',
    'profile.dashboard': 'ðŸ  Panel de Control',
    'profile.gallery': 'ðŸ–¼ï¸ GalerÃ­a',
    'profile.profile': 'ðŸ‘¤ Perfil',
    'profile.settings': 'âš™ï¸ ConfiguraciÃ³n',
    'profile.logout': 'ðŸšª Cerrar SesiÃ³n',
    'gallery.title': 'Tu GalerÃ­a',
    'gallery.subtitle': 'Ve y gestiona tu portafolio de modelado de manos',
    'gallery.loading': 'Cargando Tu GalerÃ­a...',
    'gallery.loadingDescription': 'Obteniendo tus crÃ­ticas de manos',
    'gallery.error': 'Error al Cargar GalerÃ­a',
    'gallery.tryAgain': 'ðŸ”„ Intentar de Nuevo',
    'gallery.noPhotos': 'Sin Fotos AÃºn',
    'gallery.noPhotosDescription': 'Comienza a construir tu portafolio de modelado de manos',
    'gallery.uploadFirst': 'ðŸš€ Subir Primera Foto',
    'profile.title': 'ConfiguraciÃ³n de Perfil',
    'profile.subtitle': 'Gestiona tu cuenta y preferencias',
    'profile.backToDashboard': 'Volver al Panel',
    'profile.viewGallery': 'ðŸ–¼ï¸ Ver GalerÃ­a',
    'profile.accountInfo': 'InformaciÃ³n de Cuenta',
    'profile.editProfile': 'âœï¸ Editar Perfil',
    'profile.displayName': 'Nombre de Usuario',
    'profile.displayNamePlaceholder': 'Ingresa tu nombre de usuario',
    'profile.email': 'Correo ElectrÃ³nico',
    'profile.emailPlaceholder': 'Ingresa tu correo electrÃ³nico',
    'profile.accountType': 'Tipo de Cuenta',
    'profile.googleAccount': 'Cuenta de Google',
    'profile.emailPassword': 'Correo y ContraseÃ±a',
    'profile.notSet': 'No establecido',
    'profile.saving': 'Guardando...',
    'profile.saveChanges': 'ðŸ’¾ Guardar Cambios',
    'profile.cancel': 'âŒ Cancelar',
    'profile.uploadCredits': 'ðŸ“¤ CrÃ©ditos de Subida',
    'profile.uploadsRemaining': 'Subidas Restantes',
    'profile.uploadsRemainingDesc': 'Subidas que puedes usar en cualquier momento',
    'profile.totalUploads': 'Total de Subidas Usadas',
    'profile.totalUploadsDesc': 'Conteo total de subidas',
    'profile.dangerZone': 'âš ï¸ Zona de Peligro',
    'profile.deleteAccount': 'Eliminar Cuenta',
    'profile.deleteAccountDesc': 'Eliminar permanentemente tu cuenta y datos',
    'profile.delete': 'ðŸ—‘ï¸ Eliminar',
    'profile.signOut': 'Cerrar SesiÃ³n',
    'profile.signOutDesc': 'Cerrar sesiÃ³n de todos los dispositivos',
    'profile.signOutButton': 'ðŸšª Cerrar SesiÃ³n',
    'offer.title': 'ObtÃ©n Tu CalificaciÃ³n de Manos',
    'offer.subtitle': 'EvaluaciÃ³n profesional de modelado de manos',
    'offer.price': 'por 25 fotos',
    'offer.perPicture': 'Â¡Eso es solo $0.60 por foto!',
    'offer.whatYouGet': 'Lo Que Obtienes:',
    'offer.scoreOutOf': 'PuntuaciÃ³n de 100 para cada foto',
    'offer.expertFeedback': 'Comentarios y anÃ¡lisis expertos',
    'offer.improvementTips': 'Consejos y sugerencias de mejora',
    'offer.verdict': 'Veredicto de potencial de modelo de manos',
    'offer.unlimitedTime': 'Tiempo ilimitado para usar crÃ©ditos',
    'offer.processing': 'Procesando...',
    'offer.buyFor': 'Comprar por $',
    'offer.back': 'Volver',
    'offer.warningTitle': 'âš ï¸',
    'offer.warningMessage': 'Te quedan 0 subidas. Compra mÃ¡s crÃ©ditos para continuar.',
    'navbar.dashboard': 'Panel de Control',
    'navbar.getCredits': 'Obtener CrÃ©ditos',
    'navbar.signIn': 'Iniciar SesiÃ³n',
    'navbar.signUp': 'Registrarse',
  },
  fr: {
    'app.title': 'Hand - Une agence vous embaucherait-elle pour vos mains?',
    'app.description': 'TÃ©lÃ©chargez des photos de vos mains. Obtenez des Ã©valuations brutalement honnÃªtes de l\'IA, des critiques d\'experts et un score sur 100.',
    'home.hero.title': 'Une agence vous embaucherait-elle pour vos mains?',
    'home.hero.subtitle': 'TÃ©lÃ©chargez des photos de vos mains. Obtenez des Ã©valuations brutalement honnÃªtes de l\'IA, des critiques d\'experts et un score sur 100.',
    'home.cta.getStarted': 'Commencer â†’',
    'home.features.title': 'PrÃªt Ã  Affronter la VÃ©ritÃ©?',
    'home.features.subtitle': 'Rejoignez des milliers de personnes dÃ©couvrant leur potentiel de mannequinat de mains',
    'features.title': 'Ce Que Vous Obtenez',
    'features.subtitle': 'Tout ce que vous devez savoir sur votre potentiel de mannequinat de mains',
    'features.noSugarcoating.title': 'Pas de sucre',
    'features.noSugarcoating.description': 'Seulement la vÃ©ritÃ© brutale.',
    'features.expertFeedback.title': 'Commentaires d\'experts',
    'features.expertFeedback.description': 'Vous voudrez les partager.',
    'features.score.title': 'Score sur 100',
    'features.score.description': 'Concurrencez-vous.',
    'features.verdict.title': 'Verdict de mannequin de mains',
    'features.verdict.description': 'Oui, peut-Ãªtre, ou gardez votre travail quotidien.',
    'examples.title': 'Voyez Dans Quoi Vous Vous Engagez ðŸ‘€',
    'examples.subtitle': 'Vrais exemples de nos commentaires brutalement honnÃªtes',
    'nav.signin': 'Se Connecter',
    'nav.signup': 'S\'inscrire',
    'nav.backToHome': 'Retour Ã  l\'Accueil',
    'auth.signin.title': 'Connectez-vous et affrontez la vÃ©ritÃ© sur vos mains.',
    'auth.signup.title': 'Obtenez votre Ã©valuation honnÃªte de mains.',
    'auth.email': 'E-mail',
    'auth.password': 'Mot de Passe',
    'auth.confirmPassword': 'Confirmer le Mot de Passe',
    'auth.emailPlaceholder': 'votre@email.com',
    'auth.passwordPlaceholder': 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢',
    'auth.signinButton': 'Se Connecter',
    'auth.signingIn': 'Connexion...',
    'auth.signupButton': 'CrÃ©er un Compte',
    'auth.signingUp': 'Inscription...',
    'auth.orContinueWith': 'Ou continuer avec',
    'auth.signinWithGoogle': 'Se connecter avec Google',
    'auth.signupWithGoogle': 'S\'inscrire avec Google',
    'auth.noAccount': 'Vous n\'avez pas de compte ?',
    'auth.hasAccount': 'Vous avez dÃ©jÃ  un compte ?',
    'auth.learnTruth': 'Apprenez la vÃ©ritÃ©',
    'auth.signinLink': 'Se connecter',
    'auth.getRating': 'Obtenez votre Ã©valuation honnÃªte de mains et dÃ©couvrez ce que vos mains disent vraiment de vous.',
    'settings.title': 'ParamÃ¨tres',
    'settings.language': 'Langue',
    'settings.languageDescription': 'Choisissez votre langue prÃ©fÃ©rÃ©e',
    'settings.accountSettings': 'ParamÃ¨tres du Compte',
    'settings.notifications': 'Notifications',
    'settings.emailUpdates': 'Mises Ã  jour par Email',
    'settings.done': 'TerminÃ©',
    'dashboard.title': 'Ã‰valuation de Mains ðŸ‘€',
    'dashboard.subtitle': 'Avez-vous ce qu\'il faut pour Ãªtre un mannequin de mains? DÃ©couvrons-le.',
    'dashboard.uploadDescription': 'TÃ©lÃ©chargez une photo et obtenez une Ã©valuation honnÃªte. Pas de sucre.',
    'dashboard.mobileTips': 'ðŸ“± Conseils Mobiles:',
    'dashboard.mobileTipsDescription': 'Cliquez sur "TÃ©lÃ©charger Photo" pour choisir dans votre galerie ou prendre une nouvelle photo avec votre camÃ©ra. Assurez-vous que vos mains sont bien Ã©clairÃ©es et clairement visibles!',
    'dashboard.dropPhoto': 'DÃ©posez votre photo ici',
    'dashboard.clickToUpload': 'Cliquez pour tÃ©lÃ©charger votre photo de mains',
    'dashboard.dragDropOption': 'ou glissez-dÃ©posez, ou utilisez le bouton ci-dessous',
    'dashboard.uploadPhoto': 'TÃ©lÃ©charger Photo',
    'dashboard.chooseFromGallery': 'Choisir de la Galerie',
    'dashboard.takePhoto': 'Prendre une Photo',
    'dashboard.readyForRating': 'PrÃªt Ã  obtenir votre Ã©valuation brutalement honnÃªte?',
    'dashboard.analyzing': 'Analyse en cours...',
    'dashboard.generateResults': 'GÃ©nÃ©rer RÃ©sultats',
    'dashboard.outOf': 'sur 100',
    'dashboard.analysis': 'ðŸ“ Analyse',
    'dashboard.strengths': 'âœ¨ Forces',
    'dashboard.weaknesses': 'âš ï¸ Faiblesses',
    'dashboard.noStrengths': 'Aucune force identifiÃ©e',
    'dashboard.noWeaknesses': 'Aucune faiblesse identifiÃ©e',
    'dashboard.tryAnotherPhoto': 'ðŸ“¸ Essayer Une Autre Photo',
    'dashboard.pleaseSelectFile': 'Veuillez sÃ©lectionner un fichier d\'abord',
    'dashboard.fileSizeError': 'La taille du fichier doit Ãªtre infÃ©rieure Ã  10MB',
    'dashboard.invalidFileError': 'Veuillez sÃ©lectionner un fichier image',
    'dashboard.signinRequired': 'Veuillez vous connecter pour gÃ©nÃ©rer des critiques.',
    'dashboard.generationFailed': 'Ã‰chec de la gÃ©nÃ©ration des rÃ©sultats. Veuillez rÃ©essayer.',
    'profile.dashboard': 'ðŸ  Tableau de Bord',
    'profile.gallery': 'ðŸ–¼ï¸ Galerie',
    'profile.profile': 'ðŸ‘¤ Profil',
    'profile.settings': 'âš™ï¸ ParamÃ¨tres',
    'profile.logout': 'ðŸšª DÃ©connexion',
    'gallery.title': 'Votre Galerie',
    'gallery.subtitle': 'Visualisez et gÃ©rez votre portefeuille de mannequinat de mains',
    'gallery.loading': 'Chargement de Votre Galerie...',
    'gallery.loadingDescription': 'RÃ©cupÃ©ration de vos critiques de mains',
    'gallery.error': 'Erreur de Chargement de la Galerie',
    'gallery.tryAgain': 'ðŸ”„ RÃ©essayer',
    'gallery.noPhotos': 'Pas de Photos Encore',
    'gallery.noPhotosDescription': 'Commencez Ã  construire votre portefeuille de mannequinat de mains',
    'gallery.uploadFirst': 'ðŸš€ TÃ©lÃ©charger PremiÃ¨re Photo',
    'profile.title': 'ParamÃ¨tres de Profil',
    'profile.subtitle': 'GÃ©rez votre compte et prÃ©fÃ©rences',
    'profile.backToDashboard': 'Retour au Tableau de Bord',
    'profile.viewGallery': 'ðŸ–¼ï¸ Voir Galerie',
    'profile.accountInfo': 'Informations du Compte',
    'profile.editProfile': 'âœï¸ Modifier Profil',
    'profile.displayName': 'Nom d\'Affichage',
    'profile.displayNamePlaceholder': 'Entrez votre nom d\'affichage',
    'profile.email': 'E-mail',
    'profile.emailPlaceholder': 'Entrez votre e-mail',
    'profile.accountType': 'Type de Compte',
    'profile.googleAccount': 'Compte Google',
    'profile.emailPassword': 'E-mail et Mot de Passe',
    'profile.notSet': 'Non dÃ©fini',
    'profile.saving': 'Enregistrement...',
    'profile.saveChanges': 'ðŸ’¾ Enregistrer Modifications',
    'profile.cancel': 'âŒ Annuler',
    'profile.uploadCredits': 'ðŸ“¤ CrÃ©dits de TÃ©lÃ©chargement',
    'profile.uploadsRemaining': 'TÃ©lÃ©chargements Restants',
    'profile.uploadsRemainingDesc': 'TÃ©lÃ©chargements que vous pouvez utiliser Ã  tout moment',
    'profile.totalUploads': 'Total de TÃ©lÃ©chargements UtilisÃ©s',
    'profile.totalUploadsDesc': 'Nombre total de tÃ©lÃ©chargements',
    'profile.dangerZone': 'âš ï¸ Zone de Danger',
    'profile.deleteAccount': 'Supprimer le Compte',
    'profile.deleteAccountDesc': 'Supprimer dÃ©finitivement votre compte et donnÃ©es',
    'profile.delete': 'ðŸ—‘ï¸ Supprimer',
    'profile.signOut': 'Se DÃ©connecter',
    'profile.signOutDesc': 'Se dÃ©connecter de tous les appareils',
    'profile.signOutButton': 'ðŸšª Se DÃ©connecter',
    'offer.title': 'Obtenez Votre Ã‰valuation de Mains',
    'offer.subtitle': 'Ã‰valuation professionnelle de mannequinat de mains',
    'offer.price': 'pour 25 photos',
    'offer.perPicture': 'C\'est seulement $0.60 par photo!',
    'offer.whatYouGet': 'Ce Que Vous Obtenez:',
    'offer.scoreOutOf': 'Score sur 100 pour chaque photo',
    'offer.expertFeedback': 'Commentaires et analyse d\'experts',
    'offer.improvementTips': 'Conseils et suggestions d\'amÃ©lioration',
    'offer.verdict': 'Verdict de potentiel de mannequin de mains',
    'offer.unlimitedTime': 'Temps illimitÃ© pour utiliser les crÃ©dits',
    'offer.processing': 'Traitement...',
    'offer.buyFor': 'Acheter pour $',
    'offer.back': 'Retour',
    'offer.warningTitle': 'âš ï¸',
    'offer.warningMessage': 'Il vous reste 0 tÃ©lÃ©chargements. Achetez plus de crÃ©dits pour continuer.',
    'navbar.dashboard': 'Tableau de Bord',
    'navbar.getCredits': 'Obtenir des CrÃ©dits',
    'navbar.signIn': 'Se Connecter',
    'navbar.signUp': 'S\'inscrire',
  }
}

export const useLanguage = () => {
  const context = useContext(LanguageContext)
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider')
  }
  return context
}

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const { user, updateUserLanguage } = useAuth()
  const [language, setLanguage] = useState<Language>('en')
  const [isLoaded, setIsLoaded] = useState(false)

  // Load language from cloud database (user.language) or localStorage as fallback
  useEffect(() => {
    if (user?.language) {
      // Use language from cloud database
      setLanguage(user.language)
      // Also update localStorage for consistency
      localStorage.setItem('language', user.language)
    } else {
      // Fallback to localStorage if no cloud language
      const savedLanguage = localStorage.getItem('language') as Language
      if (savedLanguage && ['en', 'es', 'fr'].includes(savedLanguage)) {
        setLanguage(savedLanguage)
      }
    }
    setIsLoaded(true)
  }, [user?.language])

  // Save language to both cloud database and localStorage when it changes
  const handleSetLanguage = async (lang: Language) => {
    setLanguage(lang)
    localStorage.setItem('language', lang)
    
    // Save to cloud database if user is authenticated
    if (user) {
      try {
        await updateUserLanguage(lang)
      } catch (error) {
        console.error('Failed to save language to cloud:', error)
        // Continue with local storage even if cloud save fails
      }
    }
  }

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations[typeof language]] || key
  }

  const value = {
    language,
    setLanguage: handleSetLanguage,
    t
  }

  // Don't render until language is loaded to prevent hydration mismatch
  if (!isLoaded) {
    return null
  }

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  )
}
