'use client'

import React, { createContext, useContext, useState, useEffect } from 'react'
import { useAuth } from '@/contexts/AuthContext'

type Language = 'en' | 'es' | 'fr'

interface LanguageContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined)

// Simple translations object
const translations = {
  en: {
    'app.title': 'Hand - Would a modeling agency hire your hands?',
    'app.description': 'Upload your photos. Get brutally honest AI ratings, expert critiques, and a score out of 100.',
    'home.hero.title': 'Would a modeling agency hire your hands?',
    'home.hero.subtitle': 'Upload your photos. Get brutally honest AI ratings, expert critiques, and a score out of 100.',
    'home.cta.getStarted': 'Get Started ‚Üí',
    'home.features.title': 'Ready to Face the Truth?',
    'home.features.subtitle': 'Join thousands of people discovering their hand modeling potential',
    'features.title': 'What You Get',
    'features.subtitle': 'Everything you need to know about your hand modeling potential',
    'features.noSugarcoating.title': 'No sugarcoating',
    'features.noSugarcoating.description': 'Only brutal truth.',
    'features.expertFeedback.title': 'Expert feedback',
    'features.expertFeedback.description': 'You\'ll want to share.',
    'features.score.title': 'Score out of 100',
    'features.score.description': 'Compete with yourself.',
    'features.verdict.title': 'Hand-model verdict',
    'features.verdict.description': 'Yes, maybe, or keep your day job.',
    'examples.title': 'See What You\'re Getting Into üëÄ',
    'examples.subtitle': 'Real examples of our brutally honest feedback',
    'nav.signin': 'Sign In',
    'nav.signup': 'Sign Up',
    'nav.backToHome': 'Back to Home',
    'auth.signin.title': 'Sign in and face the truth about your hands.',
    'auth.signup.title': 'Get your honest hand rating.',
    'auth.email': 'Email',
    'auth.password': 'Password',
    'auth.confirmPassword': 'Confirm Password',
    'auth.emailPlaceholder': 'your@email.com',
    'auth.passwordPlaceholder': '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',
    'auth.signinButton': 'Sign In',
    'auth.signingIn': 'Signing In...',
    'auth.signupButton': 'Create Account',
    'auth.signingUp': 'Signing Up...',
    'auth.orContinueWith': 'Or continue with',
    'auth.signinWithGoogle': 'Sign in with Google',
    'auth.signupWithGoogle': 'Sign up with Google',
    'auth.noAccount': 'Don\'t have an account?',
    'auth.hasAccount': 'Already have an account?',
    'auth.learnTruth': 'Learn the truth',
    'auth.signinLink': 'Sign in',
    'auth.getRating': 'Get your honest hand rating and discover what your hands really say about you.',
    'settings.title': 'Settings',
    'settings.language': 'Language',
    'settings.languageDescription': 'Choose your preferred language',
    'settings.accountSettings': 'Account Settings',
    'settings.notifications': 'Notifications',
    'settings.emailUpdates': 'Email Updates',
    'settings.done': 'Done',
    'dashboard.title': 'Hand Rating üëÄ',
    'dashboard.subtitle': 'Do you have what it takes to be a hand model? Let\'s find out.',
    'dashboard.uploadDescription': 'Upload a photo and get an honest rating. No sugarcoating.',
    'dashboard.mobileTips': 'üì± Mobile Tips:',
    'dashboard.mobileTipsDescription': 'Click "Upload Photo" to choose from your gallery or take a new photo with your camera. Make sure your hands are well-lit and clearly visible!',
    'dashboard.dropPhoto': 'Drop your photo here',
    'dashboard.clickToUpload': 'Click to upload your hand photo',
    'dashboard.dragDropOption': 'or drag & drop, or use the button below',
    'dashboard.uploadPhoto': 'Upload Photo',
    'dashboard.chooseFromGallery': 'Choose from Gallery',
    'dashboard.takePhoto': 'Take Photo',
    'dashboard.readyForRating': 'Ready to get your brutally honest rating?',
    'dashboard.analyzing': 'Analyzing...',
    'dashboard.generateResults': 'Generate Results',
    'dashboard.outOf': 'out of 100',
    'dashboard.analysis': 'üìù Analysis',
    'dashboard.strengths': '‚ú® Strengths',
    'dashboard.weaknesses': '‚ö†Ô∏è Weaknesses',
    'dashboard.noStrengths': 'No strengths identified',
    'dashboard.noWeaknesses': 'No weaknesses identified',
    'dashboard.tryAnotherPhoto': 'üì∏ Try Another Photo',
    'dashboard.pleaseSelectFile': 'Please select a file first',
    'dashboard.fileSizeError': 'File size must be less than 10MB',
    'dashboard.invalidFileError': 'Please select an image file',
    'dashboard.signinRequired': 'Please sign in to generate critiques.',
    'dashboard.generationFailed': 'Failed to generate results. Please try again.',
    'profile.dashboard': 'üè† Dashboard',
    'profile.gallery': 'üñºÔ∏è Gallery',
    'profile.profile': 'üë§ Profile',
    'profile.settings': '‚öôÔ∏è Settings',
    'profile.logout': 'üö™ Logout',
    'gallery.title': 'Your Gallery',
    'gallery.subtitle': 'View and manage your hand modeling portfolio',
    'gallery.loading': 'Loading Your Gallery...',
    'gallery.loadingDescription': 'Fetching your hand critiques',
    'gallery.error': 'Error Loading Gallery',
    'gallery.tryAgain': 'üîÑ Try Again',
    'gallery.noPhotos': 'No Photos Yet',
    'gallery.noPhotosDescription': 'Start building your hand modeling portfolio',
    'gallery.uploadFirst': 'üöÄ Upload First Photo',
    'profile.title': 'Profile Settings',
    'profile.subtitle': 'Manage your account and preferences',
    'profile.backToDashboard': 'Back to Dashboard',
    'profile.viewGallery': 'üñºÔ∏è View Gallery',
    'profile.accountInfo': 'Account Information',
    'profile.editProfile': '‚úèÔ∏è Edit Profile',
    'profile.displayName': 'Display Name',
    'profile.displayNamePlaceholder': 'Enter your display name',
    'profile.email': 'Email',
    'profile.emailPlaceholder': 'Enter your email',
    'profile.accountType': 'Account Type',
    'profile.googleAccount': 'Google Account',
    'profile.emailPassword': 'Email & Password',
    'profile.notSet': 'Not set',
    'profile.saving': 'Saving...',
    'profile.saveChanges': 'üíæ Save Changes',
    'profile.cancel': '‚ùå Cancel',
    'profile.uploadCredits': 'üì§ Upload Credits',
    'profile.uploadsRemaining': 'Uploads Remaining',
    'profile.uploadsRemainingDesc': 'Uploads you can use anytime',
    'profile.totalUploads': 'Total Uploads Used',
    'profile.totalUploadsDesc': 'All-time upload count',
    'profile.dangerZone': '‚ö†Ô∏è Danger Zone',
    'profile.deleteAccount': 'Delete Account',
    'profile.deleteAccountDesc': 'Permanently remove your account and data',
    'profile.delete': 'üóëÔ∏è Delete',
    'profile.signOut': 'Sign Out',
    'profile.signOutDesc': 'Sign out from all devices',
    'profile.signOutButton': 'üö™ Sign Out',
    'offer.title': 'Get Your Hand Rating',
    'offer.subtitle': 'Professional hand modeling assessment',
    'offer.price': 'for 25 pictures',
    'offer.perPicture': 'That\'s only $0.60 per picture!',
    'offer.whatYouGet': 'What You Get:',
    'offer.scoreOutOf': 'Score out of 100 for each picture',
    'offer.expertFeedback': 'Expert feedback and analysis',
    'offer.improvementTips': 'Improvement tips and suggestions',
    'offer.verdict': 'Hand model potential verdict',
    'offer.unlimitedTime': 'Unlimited time to use credits',
    'offer.processing': 'Processing...',
    'offer.buyFor': 'Buy for $',
    'offer.back': 'Back',
    'offer.warningTitle': '‚ö†Ô∏è',
    'offer.warningMessage': 'You have 0 uploads remaining. Purchase more credits to continue.',
    'navbar.dashboard': 'Dashboard',
    'navbar.getCredits': 'Get Credits',
    'navbar.signIn': 'Sign In',
    'navbar.signUp': 'Sign Up',
  },
  es: {
    'app.title': 'Hand - ¬øTe contratar√≠a una agencia de modelos para tus manos?',
    'app.description': 'Sube fotos de tus manos. Obt√©n calificaciones brutalmente honestas de IA, cr√≠ticas expertas y una puntuaci√≥n de 100.',
    'home.hero.title': '¬øTe contratar√≠a una agencia de modelos para tus manos?',
    'home.hero.subtitle': 'Sube fotos de tus manos. Obt√©n calificaciones brutalmente honestas de IA, cr√≠ticas expertas y una puntuaci√≥n de 100.',
    'home.cta.getStarted': 'Comenzar ‚Üí',
    'home.features.title': '¬øListo para Enfrentar la Verdad?',
    'home.features.subtitle': '√önete a miles de personas descubriendo su potencial de modelado de manos',
    'features.title': 'Lo Que Obtienes',
    'features.subtitle': 'Todo lo que necesitas saber sobre tu potencial de modelado de manos',
    'features.noSugarcoating.title': 'Sin endulzar',
    'features.noSugarcoating.description': 'Solo la verdad brutal.',
    'features.expertFeedback.title': 'Comentarios expertos',
    'features.expertFeedback.description': 'Querr√°s compartirlos.',
    'features.score.title': 'Puntuaci√≥n de 100',
    'features.score.description': 'Compite contigo mismo.',
    'features.verdict.title': 'Veredicto de modelo de manos',
    'features.verdict.description': 'S√≠, tal vez, o mant√©n tu trabajo diario.',
    'examples.title': 'Mira En Lo Que Te Est√°s Metiendo üëÄ',
    'examples.subtitle': 'Ejemplos reales de nuestros comentarios brutalmente honestos',
    'nav.signin': 'Iniciar Sesi√≥n',
    'nav.signup': 'Registrarse',
    'nav.backToHome': 'Volver al Inicio',
    'auth.signin.title': 'Inicia sesi√≥n y enfrenta la verdad sobre tus manos.',
    'auth.signup.title': 'Obt√©n tu calificaci√≥n honesta de manos.',
    'auth.email': 'Correo Electr√≥nico',
    'auth.password': 'Contrase√±a',
    'auth.confirmPassword': 'Confirmar Contrase√±a',
    'auth.emailPlaceholder': 'tu@email.com',
    'auth.passwordPlaceholder': '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',
    'auth.signinButton': 'Iniciar Sesi√≥n',
    'auth.signingIn': 'Iniciando Sesi√≥n...',
    'auth.signupButton': 'Crear Cuenta',
    'auth.signingUp': 'Registr√°ndose...',
    'auth.orContinueWith': 'O contin√∫a con',
    'auth.signinWithGoogle': 'Iniciar sesi√≥n con Google',
    'auth.signupWithGoogle': 'Registrarse con Google',
    'auth.noAccount': '¬øNo tienes una cuenta?',
    'auth.hasAccount': '¬øYa tienes una cuenta?',
    'auth.learnTruth': 'Aprende la verdad',
    'auth.signinLink': 'Iniciar sesi√≥n',
    'auth.getRating': 'Obt√©n tu calificaci√≥n honesta de manos y descubre lo que tus manos realmente dicen sobre ti.',
    'settings.title': 'Configuraci√≥n',
    'settings.language': 'Idioma',
    'settings.languageDescription': 'Elige tu idioma preferido',
    'settings.accountSettings': 'Configuraci√≥n de Cuenta',
    'settings.notifications': 'Notificaciones',
    'settings.emailUpdates': 'Actualizaciones por Correo',
    'settings.done': 'Listo',
    'dashboard.title': 'Calificaci√≥n de Manos üëÄ',
    'dashboard.subtitle': '¬øTienes lo que se necesita para ser modelo de manos? Descubr√°moslo.',
    'dashboard.uploadDescription': 'Sube una foto y obt√©n una calificaci√≥n honesta. Sin endulzar.',
    'dashboard.mobileTips': 'üì± Consejos M√≥viles:',
    'dashboard.mobileTipsDescription': 'Haz clic en "Subir Foto" para elegir de tu galer√≠a o tomar una nueva foto con tu c√°mara. ¬°Aseg√∫rate de que tus manos est√©n bien iluminadas y claramente visibles!',
    'dashboard.dropPhoto': 'Suelta tu foto aqu√≠',
    'dashboard.clickToUpload': 'Haz clic para subir tu foto de manos',
    'dashboard.dragDropOption': 'o arrastra y suelta, o usa el bot√≥n de abajo',
    'dashboard.uploadPhoto': 'Subir Foto',
    'dashboard.chooseFromGallery': 'Elegir de Galer√≠a',
    'dashboard.takePhoto': 'Tomar Foto',
    'dashboard.readyForRating': '¬øListo para obtener tu calificaci√≥n brutalmente honesta?',
    'dashboard.analyzing': 'Analizando...',
    'dashboard.generateResults': 'Generar Resultados',
    'dashboard.outOf': 'de 100',
    'dashboard.analysis': 'üìù An√°lisis',
    'dashboard.strengths': '‚ú® Fortalezas',
    'dashboard.weaknesses': '‚ö†Ô∏è Debilidades',
    'dashboard.noStrengths': 'No se identificaron fortalezas',
    'dashboard.noWeaknesses': 'No se identificaron debilidades',
    'dashboard.tryAnotherPhoto': 'üì∏ Probar Otra Foto',
    'dashboard.pleaseSelectFile': 'Por favor selecciona un archivo primero',
    'dashboard.fileSizeError': 'El tama√±o del archivo debe ser menor a 10MB',
    'dashboard.invalidFileError': 'Por favor selecciona un archivo de imagen',
    'dashboard.signinRequired': 'Por favor inicia sesi√≥n para generar cr√≠ticas.',
    'dashboard.generationFailed': 'Error al generar resultados. Por favor intenta de nuevo.',
    'profile.dashboard': 'üè† Panel de Control',
    'profile.gallery': 'üñºÔ∏è Galer√≠a',
    'profile.profile': 'üë§ Perfil',
    'profile.settings': '‚öôÔ∏è Configuraci√≥n',
    'profile.logout': 'üö™ Cerrar Sesi√≥n',
    'gallery.title': 'Tu Galer√≠a',
    'gallery.subtitle': 'Ve y gestiona tu portafolio de modelado de manos',
    'gallery.loading': 'Cargando Tu Galer√≠a...',
    'gallery.loadingDescription': 'Obteniendo tus cr√≠ticas de manos',
    'gallery.error': 'Error al Cargar Galer√≠a',
    'gallery.tryAgain': 'üîÑ Intentar de Nuevo',
    'gallery.noPhotos': 'Sin Fotos A√∫n',
    'gallery.noPhotosDescription': 'Comienza a construir tu portafolio de modelado de manos',
    'gallery.uploadFirst': 'üöÄ Subir Primera Foto',
    'profile.title': 'Configuraci√≥n de Perfil',
    'profile.subtitle': 'Gestiona tu cuenta y preferencias',
    'profile.backToDashboard': 'Volver al Panel',
    'profile.viewGallery': 'üñºÔ∏è Ver Galer√≠a',
    'profile.accountInfo': 'Informaci√≥n de Cuenta',
    'profile.editProfile': '‚úèÔ∏è Editar Perfil',
    'profile.displayName': 'Nombre de Usuario',
    'profile.displayNamePlaceholder': 'Ingresa tu nombre de usuario',
    'profile.email': 'Correo Electr√≥nico',
    'profile.emailPlaceholder': 'Ingresa tu correo electr√≥nico',
    'profile.accountType': 'Tipo de Cuenta',
    'profile.googleAccount': 'Cuenta de Google',
    'profile.emailPassword': 'Correo y Contrase√±a',
    'profile.notSet': 'No establecido',
    'profile.saving': 'Guardando...',
    'profile.saveChanges': 'üíæ Guardar Cambios',
    'profile.cancel': '‚ùå Cancelar',
    'profile.uploadCredits': 'üì§ Cr√©ditos de Subida',
    'profile.uploadsRemaining': 'Subidas Restantes',
    'profile.uploadsRemainingDesc': 'Subidas que puedes usar en cualquier momento',
    'profile.totalUploads': 'Total de Subidas Usadas',
    'profile.totalUploadsDesc': 'Conteo total de subidas',
    'profile.dangerZone': '‚ö†Ô∏è Zona de Peligro',
    'profile.deleteAccount': 'Eliminar Cuenta',
    'profile.deleteAccountDesc': 'Eliminar permanentemente tu cuenta y datos',
    'profile.delete': 'üóëÔ∏è Eliminar',
    'profile.signOut': 'Cerrar Sesi√≥n',
    'profile.signOutDesc': 'Cerrar sesi√≥n de todos los dispositivos',
    'profile.signOutButton': 'üö™ Cerrar Sesi√≥n',
    'offer.title': 'Obt√©n Tu Calificaci√≥n de Manos',
    'offer.subtitle': 'Evaluaci√≥n profesional de modelado de manos',
    'offer.price': 'por 25 fotos',
    'offer.perPicture': '¬°Eso es solo $0.60 por foto!',
    'offer.whatYouGet': 'Lo Que Obtienes:',
    'offer.scoreOutOf': 'Puntuaci√≥n de 100 para cada foto',
    'offer.expertFeedback': 'Comentarios y an√°lisis expertos',
    'offer.improvementTips': 'Consejos y sugerencias de mejora',
    'offer.verdict': 'Veredicto de potencial de modelo de manos',
    'offer.unlimitedTime': 'Tiempo ilimitado para usar cr√©ditos',
    'offer.processing': 'Procesando...',
    'offer.buyFor': 'Comprar por $',
    'offer.back': 'Volver',
    'offer.warningTitle': '‚ö†Ô∏è',
    'offer.warningMessage': 'Te quedan 0 subidas. Compra m√°s cr√©ditos para continuar.',
    'navbar.dashboard': 'Panel de Control',
    'navbar.getCredits': 'Obtener Cr√©ditos',
    'navbar.signIn': 'Iniciar Sesi√≥n',
    'navbar.signUp': 'Registrarse',
  },
  fr: {
    'app.title': 'Hand - Une agence vous embaucherait-elle pour vos mains?',
    'app.description': 'T√©l√©chargez des photos de vos mains. Obtenez des √©valuations brutalement honn√™tes de l\'IA, des critiques d\'experts et un score sur 100.',
    'home.hero.title': 'Une agence vous embaucherait-elle pour vos mains?',
    'home.hero.subtitle': 'T√©l√©chargez des photos de vos mains. Obtenez des √©valuations brutalement honn√™tes de l\'IA, des critiques d\'experts et un score sur 100.',
    'home.cta.getStarted': 'Commencer ‚Üí',
    'home.features.title': 'Pr√™t √† Affronter la V√©rit√©?',
    'home.features.subtitle': 'Rejoignez des milliers de personnes d√©couvrant leur potentiel de mannequinat de mains',
    'features.title': 'Ce Que Vous Obtenez',
    'features.subtitle': 'Tout ce que vous devez savoir sur votre potentiel de mannequinat de mains',
    'features.noSugarcoating.title': 'Pas de sucre',
    'features.noSugarcoating.description': 'Seulement la v√©rit√© brutale.',
    'features.expertFeedback.title': 'Commentaires d\'experts',
    'features.expertFeedback.description': 'Vous voudrez les partager.',
    'features.score.title': 'Score sur 100',
    'features.score.description': 'Concurrencez-vous.',
    'features.verdict.title': 'Verdict de mannequin de mains',
    'features.verdict.description': 'Oui, peut-√™tre, ou gardez votre travail quotidien.',
    'examples.title': 'Voyez Dans Quoi Vous Vous Engagez üëÄ',
    'examples.subtitle': 'Vrais exemples de nos commentaires brutalement honn√™tes',
    'nav.signin': 'Se Connecter',
    'nav.signup': 'S\'inscrire',
    'nav.backToHome': 'Retour √† l\'Accueil',
    'auth.signin.title': 'Connectez-vous et affrontez la v√©rit√© sur vos mains.',
    'auth.signup.title': 'Obtenez votre √©valuation honn√™te de mains.',
    'auth.email': 'E-mail',
    'auth.password': 'Mot de Passe',
    'auth.confirmPassword': 'Confirmer le Mot de Passe',
    'auth.emailPlaceholder': 'votre@email.com',
    'auth.passwordPlaceholder': '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',
    'auth.signinButton': 'Se Connecter',
    'auth.signingIn': 'Connexion...',
    'auth.signupButton': 'Cr√©er un Compte',
    'auth.signingUp': 'Inscription...',
    'auth.orContinueWith': 'Ou continuer avec',
    'auth.signinWithGoogle': 'Se connecter avec Google',
    'auth.signupWithGoogle': 'S\'inscrire avec Google',
    'auth.noAccount': 'Vous n\'avez pas de compte ?',
    'auth.hasAccount': 'Vous avez d√©j√† un compte ?',
    'auth.learnTruth': 'Apprenez la v√©rit√©',
    'auth.signinLink': 'Se connecter',
    'auth.getRating': 'Obtenez votre √©valuation honn√™te de mains et d√©couvrez ce que vos mains disent vraiment de vous.',
    'settings.title': 'Param√®tres',
    'settings.language': 'Langue',
    'settings.languageDescription': 'Choisissez votre langue pr√©f√©r√©e',
    'settings.accountSettings': 'Param√®tres du Compte',
    'settings.notifications': 'Notifications',
    'settings.emailUpdates': 'Mises √† jour par Email',
    'settings.done': 'Termin√©',
    'dashboard.title': '√âvaluation de Mains üëÄ',
    'dashboard.subtitle': 'Avez-vous ce qu\'il faut pour √™tre un mannequin de mains? D√©couvrons-le.',
    'dashboard.uploadDescription': 'T√©l√©chargez une photo et obtenez une √©valuation honn√™te. Pas de sucre.',
    'dashboard.mobileTips': 'üì± Conseils Mobiles:',
    'dashboard.mobileTipsDescription': 'Cliquez sur "T√©l√©charger Photo" pour choisir dans votre galerie ou prendre une nouvelle photo avec votre cam√©ra. Assurez-vous que vos mains sont bien √©clair√©es et clairement visibles!',
    'dashboard.dropPhoto': 'D√©posez votre photo ici',
    'dashboard.clickToUpload': 'Cliquez pour t√©l√©charger votre photo de mains',
    'dashboard.dragDropOption': 'ou glissez-d√©posez, ou utilisez le bouton ci-dessous',
    'dashboard.uploadPhoto': 'T√©l√©charger Photo',
    'dashboard.chooseFromGallery': 'Choisir de la Galerie',
    'dashboard.takePhoto': 'Prendre une Photo',
    'dashboard.readyForRating': 'Pr√™t √† obtenir votre √©valuation brutalement honn√™te?',
    'dashboard.analyzing': 'Analyse en cours...',
    'dashboard.generateResults': 'G√©n√©rer R√©sultats',
    'dashboard.outOf': 'sur 100',
    'dashboard.analysis': 'üìù Analyse',
    'dashboard.strengths': '‚ú® Forces',
    'dashboard.weaknesses': '‚ö†Ô∏è Faiblesses',
    'dashboard.noStrengths': 'Aucune force identifi√©e',
    'dashboard.noWeaknesses': 'Aucune faiblesse identifi√©e',
    'dashboard.tryAnotherPhoto': 'üì∏ Essayer Une Autre Photo',
    'dashboard.pleaseSelectFile': 'Veuillez s√©lectionner un fichier d\'abord',
    'dashboard.fileSizeError': 'La taille du fichier doit √™tre inf√©rieure √† 10MB',
    'dashboard.invalidFileError': 'Veuillez s√©lectionner un fichier image',
    'dashboard.signinRequired': 'Veuillez vous connecter pour g√©n√©rer des critiques.',
    'dashboard.generationFailed': '√âchec de la g√©n√©ration des r√©sultats. Veuillez r√©essayer.',
    'profile.dashboard': 'üè† Tableau de Bord',
    'profile.gallery': 'üñºÔ∏è Galerie',
    'profile.profile': 'üë§ Profil',
    'profile.settings': '‚öôÔ∏è Param√®tres',
    'profile.logout': 'üö™ D√©connexion',
    'gallery.title': 'Votre Galerie',
    'gallery.subtitle': 'Visualisez et g√©rez votre portefeuille de mannequinat de mains',
    'gallery.loading': 'Chargement de Votre Galerie...',
    'gallery.loadingDescription': 'R√©cup√©ration de vos critiques de mains',
    'gallery.error': 'Erreur de Chargement de la Galerie',
    'gallery.tryAgain': 'üîÑ R√©essayer',
    'gallery.noPhotos': 'Pas de Photos Encore',
    'gallery.noPhotosDescription': 'Commencez √† construire votre portefeuille de mannequinat de mains',
    'gallery.uploadFirst': 'üöÄ T√©l√©charger Premi√®re Photo',
    'profile.title': 'Param√®tres de Profil',
    'profile.subtitle': 'G√©rez votre compte et pr√©f√©rences',
    'profile.backToDashboard': 'Retour au Tableau de Bord',
    'profile.viewGallery': 'üñºÔ∏è Voir Galerie',
    'profile.accountInfo': 'Informations du Compte',
    'profile.editProfile': '‚úèÔ∏è Modifier Profil',
    'profile.displayName': 'Nom d\'Affichage',
    'profile.displayNamePlaceholder': 'Entrez votre nom d\'affichage',
    'profile.email': 'E-mail',
    'profile.emailPlaceholder': 'Entrez votre e-mail',
    'profile.accountType': 'Type de Compte',
    'profile.googleAccount': 'Compte Google',
    'profile.emailPassword': 'E-mail et Mot de Passe',
    'profile.notSet': 'Non d√©fini',
    'profile.saving': 'Enregistrement...',
    'profile.saveChanges': 'üíæ Enregistrer Modifications',
    'profile.cancel': '‚ùå Annuler',
    'profile.uploadCredits': 'üì§ Cr√©dits de T√©l√©chargement',
    'profile.uploadsRemaining': 'T√©l√©chargements Restants',
    'profile.uploadsRemainingDesc': 'T√©l√©chargements que vous pouvez utiliser √† tout moment',
    'profile.totalUploads': 'Total de T√©l√©chargements Utilis√©s',
    'profile.totalUploadsDesc': 'Nombre total de t√©l√©chargements',
    'profile.dangerZone': '‚ö†Ô∏è Zone de Danger',
    'profile.deleteAccount': 'Supprimer le Compte',
    'profile.deleteAccountDesc': 'Supprimer d√©finitivement votre compte et donn√©es',
    'profile.delete': 'üóëÔ∏è Supprimer',
    'profile.signOut': 'Se D√©connecter',
    'profile.signOutDesc': 'Se d√©connecter de tous les appareils',
    'profile.signOutButton': 'üö™ Se D√©connecter',
    'offer.title': 'Obtenez Votre √âvaluation de Mains',
    'offer.subtitle': '√âvaluation professionnelle de mannequinat de mains',
    'offer.price': 'pour 25 photos',
    'offer.perPicture': 'C\'est seulement $0.60 par photo!',
    'offer.whatYouGet': 'Ce Que Vous Obtenez:',
    'offer.scoreOutOf': 'Score sur 100 pour chaque photo',
    'offer.expertFeedback': 'Commentaires et analyse d\'experts',
    'offer.improvementTips': 'Conseils et suggestions d\'am√©lioration',
    'offer.verdict': 'Verdict de potentiel de mannequin de mains',
    'offer.unlimitedTime': 'Temps illimit√© pour utiliser les cr√©dits',
    'offer.processing': 'Traitement...',
    'offer.buyFor': 'Acheter pour $',
    'offer.back': 'Retour',
    'offer.warningTitle': '‚ö†Ô∏è',
    'offer.warningMessage': 'Il vous reste 0 t√©l√©chargements. Achetez plus de cr√©dits pour continuer.',
    'navbar.dashboard': 'Tableau de Bord',
    'navbar.getCredits': 'Obtenir des Cr√©dits',
    'navbar.signIn': 'Se Connecter',
    'navbar.signUp': 'S\'inscrire',
  }
}

export const useLanguage = () => {
  const context = useContext(LanguageContext)
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider')
  }
  return context
}

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const { user, updateUserLanguage } = useAuth()
  const [language, setLanguage] = useState<Language>('en')
  const [isLoaded, setIsLoaded] = useState(false)

  // Load language from cloud database (user.language) or localStorage as fallback
  useEffect(() => {
    if (user?.language) {
      // Use language from cloud database
      setLanguage(user.language)
      // Also update localStorage for consistency
      localStorage.setItem('language', user.language)
    } else {
      // Fallback to localStorage if no cloud language
      const savedLanguage = localStorage.getItem('language') as Language
      if (savedLanguage && ['en', 'es', 'fr'].includes(savedLanguage)) {
        setLanguage(savedLanguage)
      }
    }
    setIsLoaded(true)
  }, [user?.language])

  // Save language to both cloud database and localStorage when it changes
  const handleSetLanguage = async (lang: Language) => {
    setLanguage(lang)
    localStorage.setItem('language', lang)
    
    // Save to cloud database if user is authenticated
    if (user) {
      try {
        await updateUserLanguage(lang)
      } catch (error) {
        console.error('Failed to save language to cloud:', error)
        // Continue with local storage even if cloud save fails
      }
    }
  }

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations[typeof language]] || key
  }

  const value = {
    language,
    setLanguage: handleSetLanguage,
    t
  }

  // Don't render until language is loaded to prevent hydration mismatch
  if (!isLoaded) {
    return null
  }

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  )
}
